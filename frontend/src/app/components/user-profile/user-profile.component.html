<div class="flex flex-row h-auto px-64 py-32 bg-lightBlue/5 justify-between pb-32">
  <div class="flex flex-col p-4 h-[1100px] w-[35%] bg-white rounded-md shadow-xl relative">
    <div class="flex rounded-full bg-third mx-auto my-2 h-[130px] w-[130px] items-center transition-[0.5s]">
        <fa-icon [icon]="faUser" class="mx-auto text-white text-[48px] cursor-pointer"/>
    </div>
    <p class="font-inter text-third font-bold mx-auto text-[30px]">{{ userProfile?.name }}</p>
    <div class="flex flex-row items-center mx-auto w-full items-center justify-center">
      <p class="font-inter font-light text-[#7f8fa6]">Penalty points:</p>
      <p class="font-inter font-light text-[#7f8fa6] ml-[10px]">{{ userProfile?.penaltyPoints }}</p>
    </div>
    <div class="flex flex-row items-center mx-auto w-full items-center justify-center">
        <p class="font-inter font-light text-[#7f8fa6]">Loyalty membership:</p>
        <p class="font-inter font-light text-[#7f8fa6] ml-[10px]">No available programs</p>
    </div>
    <hr class="w-full bg-gray mt-4 mb-4">
    <div class="flex flex-col w-full">
      <p class="text-third font-inter font-medium text-[14px]">Personal info</p>
      <div *ngIf="userProfile?.name" class="flex flex-row w-full justify-between mt-2">
        <p class="text-gray font-inter font-light text-[18px]">First name:</p>
        <p class="text-third font-inter font-regular text-[18px]">{{ userProfile?.name }}</p>
      </div>
      <div *ngIf="userProfile?.name" class="flex flex-row w-full justify-between mt-2">
        <p class="text-gray font-inter font-light text-[18px]">Last name:</p>
        <p class="text-third font-inter font-regular text-[18px]">{{ userProfile?.lastName }}</p>
      </div>
      <div *ngIf="userProfile?.dateOfBirth" class="flex flex-row w-full justify-between mt-2">
        <p class="text-gray font-inter font-light text-[18px]">Date of birth:</p>
        <p class="text-third font-inter font-regular text-[18px]">{{ userProfile?.dateOfBirth }}</p>
      </div>
      <div *ngIf="userProfile?.city" class="flex flex-row w-full justify-between mt-2">
        <p class="text-gray font-inter font-light text-[18px]">Location:</p>
        <p class="text-third font-inter font-regular text-[18px]">{{ userProfile?.city }}, {{ userProfile?.country }}</p>
      </div>
    </div>
    <hr class="w-full bg-gray mt-4 mb-4">
    <div class="flex flex-col w-full">
      <p class="text-third font-inter font-medium text-[14px]">Contact</p>
      <div *ngIf="userProfile?.email" class="flex flex-row w-full justify-between mt-2">
        <p class="text-gray font-inter font-light text-[18px]">Email:</p>
        <p class="text-third font-inter font-regular text-[18px]">{{ userProfile?.email }}</p>
      </div>
      <div *ngIf="userProfile?.phoneNumber" class="flex flex-row w-full justify-between mt-2">
        <p class="text-gray font-inter font-light text-[18px]">Phone number:</p>
        <p class="text-third font-inter font-regular text-[18px]">{{ userProfile?.phoneNumber }}</p>
      </div>
    </div>
    <hr class="w-full bg-gray mt-4 mb-4">
    <div class="flex flex-col w-full">
      <p class="text-third font-inter font-medium text-[14px]">Professional</p>
      <div class="flex flex-row w-full justify-between mt-2">
        <p class="text-gray font-inter font-light text-[18px]">Profession:</p>
        <p class="text-third font-inter font-regular text-[18px]">{{ userProfile?.profession }}</p>
      </div>
      <hr class="w-full bg-gray mt-4 mb-4">
      <div class="flex flex-col w-full h-[200px]">
        <p class="text-gray font-inter font-light text-[18px]">Bio / Company info:</p>
        <p class="text-third font-inter font-regular text-[18px]">{{ userProfile?.companyInfo }}</p>
      </div>
      <hr class="w-full bg-gray mt-4 mb-4">
    </div>
    <button class="w-full text-center text-[24px] bg-third hover:bg-lightBlue transition-[0.5s] font-inter font-semibold 
                  text-white rounded-md h-[55px]" (click)="goToUpdate()">
            Update profile
    </button>
  </div>
  <div class="flex flex-col w-[60%] items-center space-y-8">
    <div class="flex flex-col w-full p-[12px] bg-white h-auto max-h-[800px] rounded-md shadow-md">
      <full-calendar class="w-full" [options]="calendarOptions">
        <ng-template #eventContent let-arg class="overflow-scroll">
          <div *ngIf="arg.event.extendedProps" (click)="displayEquipmentPickupSlot(arg.event.extendedProps.slot)"
                [ngStyle]="getEventStyles(arg.event.extendedProps)"
                class="flex flex-col font-inter text-white p-[5px] w-full rounded-md cursor-pointer">
            <p>Start: {{ arg.event.start | date: 'HH:mm' }}</p>
            <p>Duration: {{ arg.event.extendedProps.duration }} min</p>
            <p>
              <ng-container *ngIf="arg.event.extendedProps.firstname && arg.event.extendedProps.lastname">
                {{ arg.event.extendedProps.firstname }} {{ arg.event.extendedProps.lastname }}
              </ng-container>
              <ng-container *ngIf="!arg.event.extendedProps.firstname && !arg.event.extendedProps.lastname">
                Free appointment
              </ng-container>
            </p>
          </div>
        </ng-template>
      </full-calendar>
      <button class="w-full text-center h-[60px] mt-4 rounded-md bg-third hover:bg-lightBlue transition-[0.5s] text-white font-inter text-[24px] font-medium" (click)="openCreatePickupSlotForm()">
        <p>Add new appointment</p>
      </button>
    </div>  
  </div>

  <div *ngIf="!userProfile" class="text-center mt-8">
    <p>Loading...</p>
  </div>
  
  <div *ngIf="userProfile === null" class="text-center mt-8">
    <p>Error loading user profile.</p>
  </div>

</div>
